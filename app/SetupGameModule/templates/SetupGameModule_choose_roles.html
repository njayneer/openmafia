{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block styles %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ url_for('SetupGameModule.static', filename='css/datatables.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('SetupGameModule.static', filename='css/styles.css') }}">
{% endblock %}

{% block scripts %}
{{ super() }}
<script type="text/javascript" src="{{ url_for('SetupGameModule.static', filename='js/jquery-3.5.1') }}"></script>
<script type="text/javascript" src="{{ url_for('SetupGameModule.static', filename='js/jquery.dataTables.min.js') }}"></script>
{%endblock%}

{%block title%}OpenMafia - wybierz role{%endblock%}

{%block main_content%}
<a href="../game_configuration">Powrót do głównego panelu</a>
<h3>Wybierz role:</h3>
{% if game_admin_activated %}
{{ current_user.user }} - Mistrz gry aktywny
{% else %}
Rozgrywka bez mistrza gry
{% endif %}
<form method="post" class="form form-horizontal" name="chooserolesform">
    {{ wtf.form_errors(form,"only") }}
    {{ form.hidden_tag() }}
    {% for r in form.roles %}
        {{ r.form.role }}<br/>
    {% endfor %}<br />
    <h3>Konfiguracje ról</h3>
    {% for r in form.role_visibility_after_death %}
    <h4>{{ form.roles[0].form.role.choices[loop.index0] }}</h4>
    {{ r.form.role_visible_after_death.label }}
    {{ r.form.role_visible_after_death }}<br />
    {% if roles[loop.index0] == 'sniper' %}
        {{ form.sniper_shots.label }}
        {{ form.sniper_shots }}<br />
        {{ form.sniper_blocked_after_missed_shot.label }}
        {{ form.sniper_blocked_after_missed_shot }}
    {% endif %}
    {% if roles[loop.index0] == 'spy' %}
        {{ form.spy_specific_roles.label }}
        {{ form.spy_specific_roles }}<br />
        {{ form.spy_allow_change_owner.label }}
        {{ form.spy_allow_change_owner }}
    {% endif %}
    {% endfor %}
    <div class="form-actions">
        <button name="action_choose_roles" type="submit" class="btn btn-primary">Zatwierdź role</button>
    </div>
</form>
{%endblock%}
